<form theme="dark">
  <label>Splunk - SH - 01 - Identities - Dashboard - v1</label>
  <search id="splunk_sh_01_identities_dashboard_v1">
    <query>
| inputlookup splunk_sh_identities_lookup 
| fields identity prefix nick first last full_name suffix email phone phone2 managedBy priority bunit category watchlist startDate endDate work_city work_region work_country work_lat work_long Title LOB Department Emp_Type Emp_Status Cost_Center Location_Code Floor_Number Splunk_Roles Splunk_Instance Contractor_Expiration capabilities defaultApp defaultAppSourceRole last_successful_login locked-out roles type tz 
| fillnull value="Undefined" Splunk_Roles Splunk_Instance identity prefix nick first last full_name suffix email phone phone2 managedBy priority bunit category watchlist startDate endDate work_city work_region work_country work_lat work_long Title LOB Department Emp_Type Emp_Status Cost_Center Location_Code Floor_Number Contractor_Expiration capabilities defaultApp defaultAppSourceRole last_successful_login locked-out roles type tz 
| makemv delim="|" Splunk_Roles | makemv delim="|" Splunk_Instance | makemv delim="|" capabilities | makemv delim="|" roles
| search Splunk_Roles="$Splunk_Roles$" identity="$identity$" Emp_Type="$Emp_Type$" Emp_Status="$Emp_Status$" work_city="$work_city$" work_region="$work_region$" work_country="$work_country$" Location_Code="$Location_Code$" Department="$Department$" LOB="$LOB$" Cost_Center="$Cost_Center$" full_name="$full_name$" Splunk_Instance="$Splunk_Instance$"
      </query>
  </search>
  <fieldset submitButton="false" autoRun="true">
    <input type="dropdown" token="Splunk_Roles" searchWhenChanged="true">
      <label>Splunk Roless</label>
      <choice value="*">All</choice>
      <fieldForLabel>Splunk_Roles</fieldForLabel>
      <fieldForValue>Splunk_Roles</fieldForValue>
      <search base="splunk_sh_01_identities_dashboard_v1">
        <query>| stats count by Splunk_Roles</query>
      </search>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
    <input type="dropdown" token="Splunk_Instance" searchWhenChanged="true">
      <label>Splunk Instance</label>
      <choice value="*">All</choice>
      <fieldForLabel>Splunk_Instance</fieldForLabel>
      <fieldForValue>Splunk_Instance</fieldForValue>
      <search base="splunk_sh_01_identities_dashboard_v1">
        <query>| stats count by Splunk_Instance</query>
      </search>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
    <input type="dropdown" token="identity" searchWhenChanged="true">
      <label>identity</label>
      <choice value="*">All</choice>
      <fieldForLabel>identity</fieldForLabel>
      <fieldForValue>identity</fieldForValue>
      <search base="splunk_sh_01_identities_dashboard_v1">
        <query>| stats count by identity</query>
      </search>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
    <input type="dropdown" token="full_name" searchWhenChanged="true">
      <label>Full Name</label>
      <choice value="*">All</choice>
      <fieldForLabel>full_name</fieldForLabel>
      <fieldForValue>full_name</fieldForValue>
      <search base="splunk_sh_01_identities_dashboard_v1">
        <query>| stats count by full_name</query>
      </search>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
    <input type="dropdown" token="LOB" searchWhenChanged="true">
      <label>LOB</label>
      <choice value="*">All</choice>
      <fieldForLabel>LOB</fieldForLabel>
      <fieldForValue>LOB</fieldForValue>
      <search base="splunk_sh_01_identities_dashboard_v1">
        <query>| stats count by LOB</query>
      </search>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
    <input type="dropdown" token="Cost_Center" searchWhenChanged="true">
      <label>Cost Center</label>
      <choice value="*">All</choice>
      <fieldForLabel>Cost_Center</fieldForLabel>
      <fieldForValue>Cost_Center</fieldForValue>
      <search base="splunk_sh_01_identities_dashboard_v1">
        <query>| stats count by Cost_Center</query>
      </search>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
    <input type="dropdown" token="Department" searchWhenChanged="true">
      <label>Department</label>
      <choice value="*">All</choice>
      <fieldForLabel>Department</fieldForLabel>
      <fieldForValue>Department</fieldForValue>
      <search base="splunk_sh_01_identities_dashboard_v1">
        <query>| stats count by Department</query>
      </search>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
    <input type="dropdown" token="Emp_Type" searchWhenChanged="true">
      <label>Employee Type</label>
      <choice value="*">All</choice>
      <fieldForLabel>Emp_Type</fieldForLabel>
      <fieldForValue>Emp_Type</fieldForValue>
      <search base="splunk_sh_01_identities_dashboard_v1">
        <query>| stats count by Emp_Type</query>
      </search>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
    <input type="dropdown" token="Emp_Status" searchWhenChanged="true">
      <label>Employee Status</label>
      <choice value="*">All</choice>
      <fieldForLabel>Emp_Status</fieldForLabel>
      <fieldForValue>Emp_Status</fieldForValue>
      <search base="splunk_sh_01_identities_dashboard_v1">
        <query>| stats count by Emp_Status</query>
      </search>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
    <input type="dropdown" token="work_city" searchWhenChanged="true">
      <label>City</label>
      <choice value="*">All</choice>
      <fieldForLabel>work_city</fieldForLabel>
      <fieldForValue>work_city</fieldForValue>
      <search base="splunk_sh_01_identities_dashboard_v1">
        <query>| stats count by work_city</query>
      </search>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
    <input type="dropdown" token="work_region" searchWhenChanged="true">
      <label>Region/State</label>
      <choice value="*">All</choice>
      <fieldForLabel>work_region</fieldForLabel>
      <fieldForValue>work_region</fieldForValue>
      <search base="splunk_sh_01_identities_dashboard_v1">
        <query>| stats count by work_region</query>
      </search>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
    <input type="dropdown" token="work_country" searchWhenChanged="true">
      <label>Country</label>
      <choice value="*">All</choice>
      <fieldForLabel>work_country</fieldForLabel>
      <fieldForValue>work_country</fieldForValue>
      <search base="splunk_sh_01_identities_dashboard_v1">
        <query>| stats count by work_country</query>
      </search>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
    <input type="dropdown" token="Location_Code" searchWhenChanged="true">
      <label>Location Code</label>
      <choice value="*">All</choice>
      <fieldForLabel>Location_Code</fieldForLabel>
      <fieldForValue>Location_Code</fieldForValue>
      <search base="splunk_sh_01_identities_dashboard_v1">
        <query>| stats count by Location_Code</query>
      </search>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
  </fieldset>
  <row id="style_settings" depends="$visible$">
    <panel depends="$alwaysHideCSS$">
      <html>
         <style>
           <!--.dashboard-body {-->
           <!--    background: #a6a6a6 !important;-->
           <!--}-->
           .dashboard-panel h2{
             background:#FFA500 !important;
             color:black !important;
             text-align: center !important;
             font-weight: bold !important;
             border-top-right-radius: 15px;
             border-top-left-radius: 15px; }
            .dashboard-panel h1.panel-title {
              font-weight: bold !important;
              font-size: 100% !important; }
                .table, th, td {
              border: 8px solid black !important; }
            { display: none;  }
         </style>
       </html>
    </panel>
  </row>
  <row>
    <panel>
      <table>
        <search base="splunk_sh_01_identities_dashboard_v1">
          <query>| table identity first last full_name Title LOB Department bunit email managedBy work_city work_region work_country Emp_Type Emp_Status phone Cost_Center Location_Code Floor_Number startDate endDate Contractor_Expiration defaultApp defaultAppSourceRole last_successful_login locked-out roles type tz 
| convert ctime(last_successful_login)
| rename identity AS Identity first AS First last AS Last full_name AS "Full Name" email AS Email work_city AS City work_region AS Region work_country AS Country managedBy AS Manager bunit AS "Business Unit"</query>
        </search>
        <option name="count">100</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">none</option>
        <option name="percentagesRow">false</option>
        <option name="refresh.display">preview</option>
        <option name="rowNumbers">true</option>
        <option name="totalsRow">false</option>
        <option name="wrap">false</option>
        <format type="color" field="Identity">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
        <format type="color" field="First">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
        <format type="color" field="Last">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
        <format type="color" field="Full Name">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
        <format type="color" field="Email">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
        <format type="color" field="Manager">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
        <format type="color" field="Business Unit">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
        <format type="color" field="Country">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
        <format type="color" field="Title">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
        <format type="color" field="LOB">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
        <format type="color" field="Region">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
        <format type="color" field="City">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
        <format type="color" field="Department">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
        <format type="color" field="Emp_Type">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
        <format type="color" field="Emp_Status">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
      </table>
    </panel>
  </row>
  <row>
    <panel>
      <title>By LOB</title>
      <chart>
        <search base="splunk_sh_01_identities_dashboard_v1">
          <query>| stats count by LOB</query>
        </search>
        <option name="charting.chart">pie</option>
        <option name="charting.chart.sliceCollapsingThreshold">0</option>
        <option name="charting.drilldown">none</option>
        <option name="refresh.display">preview</option>
      </chart>
    </panel>
    <panel>
      <title>By Department</title>
      <chart>
        <search base="splunk_sh_01_identities_dashboard_v1">
          <query>| stats count by Department</query>
        </search>
        <option name="charting.chart">pie</option>
        <option name="charting.chart.sliceCollapsingThreshold">0</option>
        <option name="charting.drilldown">none</option>
        <option name="refresh.display">preview</option>
      </chart>
    </panel>
    <panel>
      <title>By Splunk Roless</title>
      <chart>
        <search base="splunk_sh_01_identities_dashboard_v1">
          <query>| stats count by Splunk_Roles</query>
        </search>
        <option name="charting.chart">pie</option>
        <option name="charting.chart.sliceCollapsingThreshold">0</option>
        <option name="charting.drilldown">none</option>
        <option name="refresh.display">preview</option>
      </chart>
    </panel>
    <panel>
      <title>City</title>
      <chart>
        <search base="splunk_sh_01_identities_dashboard_v1">
          <query>| stats count by work_city</query>
        </search>
        <option name="charting.chart">pie</option>
        <option name="charting.chart.sliceCollapsingThreshold">0</option>
        <option name="charting.drilldown">none</option>
        <option name="refresh.display">preview</option>
      </chart>
    </panel>
    <panel>
      <title>Rgion/State</title>
      <chart>
        <search base="splunk_sh_01_identities_dashboard_v1">
          <query>| stats count by work_region</query>
        </search>
        <option name="charting.chart">pie</option>
        <option name="charting.chart.sliceCollapsingThreshold">0</option>
        <option name="charting.drilldown">none</option>
        <option name="refresh.display">preview</option>
      </chart>
    </panel>
    <panel>
      <title>Country</title>
      <chart>
        <search base="splunk_sh_01_identities_dashboard_v1">
          <query>| stats count by work_country</query>
        </search>
        <option name="charting.chart">pie</option>
        <option name="charting.chart.sliceCollapsingThreshold">0</option>
        <option name="charting.drilldown">none</option>
        <option name="refresh.display">preview</option>
      </chart>
    </panel>
    <panel>
      <title>By Location Code</title>
      <chart>
        <search base="splunk_sh_01_identities_dashboard_v1">
          <query>| stats count by Location_Code</query>
        </search>
        <option name="charting.chart">pie</option>
        <option name="charting.chart.sliceCollapsingThreshold">0</option>
        <option name="charting.drilldown">none</option>
        <option name="refresh.display">preview</option>
      </chart>
    </panel>
  </row>
</form>